responses:
  - id: "Q1"
    query: |
      SELECT COUNT(*) as count_parcels
      FROM cypher('agri_graph', $$
        MATCH (f:AgriFarm)<-[:belongsTo]-(p:AgriParcel)
        RETURN COUNT(p) as parcel_count
      $$) as (parcel_count agtype);

  - id: "Q2"
    query: |
      SELECT n.properties->>'id' as device_id
      FROM cypher('agri_graph', $$
        MATCH (p:AgriParcel)<-[:belongsTo]-(d:Device)
        RETURN d.properties.id as device_id
      $$) as (device_id agtype);

  - id: "Q3"
    query: |
      SELECT n.properties->>'id' as device_id
      FROM cypher('agri_graph', $$
        MATCH (d:Device)
        WHERE 'soilMoisture' IN d.properties.controlledProperty
        RETURN d.properties.id as device_id
      $$) as (device_id agtype);

  - id: "Q4"
    query: |
      SELECT n.properties->>'id' as device_id
      FROM cypher('agri_graph', $$
        MATCH (f:AgriFarm)<-[:belongsTo]-(:AgriParcel)<-[:belongsTo]-(:Device)-[:hasDevice]->(d:Device)
        WHERE 'soilMoisture' IN d.properties.controlledProperty
        RETURN d.properties.id as device_id
      $$) as (device_id agtype);

  - id: "Q5"
    query: |
      SELECT n.properties->>'id' as parcel_id
      FROM cypher('agri_graph', $$
        MATCH (p:AgriParcel)
        WHERE p.properties.colture = 'Kiwi G3'
        RETURN p.properties.id as parcel_id
      $$) as (parcel_id agtype);

  - id: "Q6"
    query: |
      SELECT n.properties->>'id' as device_id
      FROM cypher('agri_graph', $$
        MATCH (p:AgriParcel)<-[:belongsTo]-(d:Device)
        WHERE 'dripper' IN d.properties.controlledProperty
        RETURN d.properties.id as device_id
      $$) as (device_id agtype);

  - id: "Q7"
    query: |
      SELECT device_id, min_value
      FROM cypher('agri_graph', $$
        MATCH (d:Device)
        WHERE 'soilMoisture' IN d.properties.controlledProperty AND d.properties.value IS NOT NULL
        RETURN d.properties.id as device_id, 
               MIN(d.properties.value[0]) as min_value
        ORDER BY min_value ASC
        LIMIT 1
      $$) as (device_id agtype, min_value agtype);

  - id: "Q8"
    query: |
      SELECT device_id, distance
      FROM (
        SELECT n.properties->>'id' as device_id,
               ST_Distance(
                 ST_GeomFromText(n.properties->>'location'),
                 ST_GeomFromText('POINT(11.799 44.235)')
               ) as distance
        FROM cypher('agri_graph', $$
          MATCH (d:Device)
          WHERE d.properties.location IS NOT NULL
          RETURN d.properties.id as device_id, d.properties.location as location
        $$) as (device_id agtype, location agtype)
      ) as devices_with_distance
      ORDER BY distance ASC
      LIMIT 1;

  - id: "Q9"
    query: |
      SELECT parcel_id, device_count
      FROM cypher('agri_graph', $$
        MATCH (p:AgriParcel)<-[:belongsTo]-(d:Device)
        RETURN p.properties.id as parcel_id, COUNT(d) as device_count
        ORDER BY device_count DESC
        LIMIT 1
      $$) as (parcel_id agtype, device_count agtype);

  - id: "Q10"
    query: |
      SELECT device_id, min_temperature
      FROM (
        SELECT device_id, 
               MIN(value::numeric) as min_temperature
        FROM measurements 
        WHERE controlled_property = 'temperature'
        GROUP BY device_id
        ORDER BY min_temperature ASC
        LIMIT 1
      ) as min_temp_device;