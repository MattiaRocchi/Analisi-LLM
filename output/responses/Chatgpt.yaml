responses:
  - id: Q1
    query: |
      SELECT * FROM cypher('agri_graph', $$
        MATCH (f:AgriFarm {name: 'ZESPRI AZ. AGR. DALLE FABBRICHE ANDREA'})-[:hasDevice]->(p:AgriParcel)
        RETURN COUNT(p) AS num_parcel
      $$) AS (num_parcel integer);

  - id: Q2
    query: |
      SELECT * FROM cypher('agri_graph', $$
        MATCH (p:AgriParcel {name: 'Fondo Errano 2024 T0'})-[:hasDevice]->(d:Device)
        RETURN d.id AS device_id
      $$) AS (device_id text);

  - id: Q3
    query: |
      SELECT * FROM cypher('agri_graph', $$
        MATCH (d:Device)
        WHERE 'soilMoisture' IN d.controlledProperty
        RETURN d.id AS device_id, d.name AS device_name
      $$) AS (device_id text, device_name text);

  - id: Q4
    query: |
      SELECT * FROM cypher('agri_graph', $$
        MATCH (f:AgriFarm)
        WHERE f.name CONTAINS 'ZESPRI'
        MATCH (f)-[:hasDevice*]->(d:Device)
        WHERE 'soilMoisture' IN d.controlledProperty
        RETURN DISTINCT d.id AS device_id, d.name AS device_name
      $$) AS (device_id text, device_name text);

  - id: Q5
    query: |
      SELECT * FROM cypher('agri_graph', $$
        MATCH (f:AgriFarm {name: 'ZESPRI AZ. AGR. DALLE FABBRICHE ANDREA'})-[:hasDevice]->(p:AgriParcel)
        WHERE p.colture ILIKE '%Kiwi%'
        RETURN p.name AS parcel_name
      $$) AS (parcel_name text);

  - id: Q6
    query: |
      SELECT * FROM cypher('agri_graph', $$
        MATCH (p:AgriParcel)
        WHERE p.name CONTAINS 'T1' AND p.irrigationSystemType = 'Drip irrigation'
        MATCH (p)-[:hasDevice]->(d:Device)
        RETURN d.id AS device_id, d.name AS device_name
      $$) AS (device_id text, device_name text);

  - id: Q7
    query: |
      SELECT * FROM cypher('agri_graph', $$
        MATCH (d:Device)
        WHERE 'soilMoisture' IN d.controlledProperty
        RETURN d.name AS device_name, MIN(d.value[0]) AS min_value
      $$) AS (device_name text, min_value float);

  - id: Q8
    query: |
      SELECT * FROM cypher('agri_graph', $$
        MATCH (d:Device)
        WHERE exists(d.location)
        WITH d, ST_GeomFromText(d.location) AS geom
        ORDER BY ST_Distance(geom, ST_GeomFromText('POINT(11.799 44.235)'))
        LIMIT 1
        RETURN d.id AS nearest_device_id, d.name AS nearest_device_name
      $$) AS (nearest_device_id text, nearest_device_name text);

  - id: Q9
    query: |
      SELECT * FROM cypher('agri_graph', $$
        MATCH (f:AgriFarm {name: 'ZESPRI AZ. AGR. DALLE FABBRICHE ANDREA'})-[:hasDevice]->(p:AgriParcel)-[:hasDevice]->(d:Device)
        RETURN p.name AS parcel_name, COUNT(d) AS num_devices
        ORDER BY num_devices DESC
        LIMIT 1
      $$) AS (parcel_name text, num_devices integer);
