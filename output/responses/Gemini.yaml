responses:
  - id: "Q1"
    query: |
      SELECT * FROM cypher('agri_graph', $$
        MATCH (f:AgriFarm {name: 'ZESPRI AZ. AGR. DALLE FABBRICHE ANDREA'}) - [r:hasAgriParcel] -> (p:AgriParcel)
        RETURN f, r, p
      $$) as (f agtype, r agtype, p agtype);
  - id: "Q2"
    query: |
      SELECT * FROM cypher('agri_graph', $$
        MATCH (p:AgriParcel {name: 'Fondo Errano 2024 T0'}) - [r:hasDevice] -> (d:Device)
        RETURN p, r, d
      $$) as (p agtype, r agtype, d agtype);
  - id: "Q3"
    query: |
      SELECT * FROM cypher('agri_graph', $$
        MATCH (d:Device)
        WHERE d.id IN (
          SELECT DISTINCT device_id FROM public.measuremets WHERE controlled_property = 'soilMoisture'
        )
        RETURN d
      $$) as (d agtype);
  - id: "Q4"
    query: |
      SELECT * FROM cypher('agri_graph', $$
        MATCH (f:AgriFarm {name: 'ZESPRI AZ. AGR. DALLE FABBRICHE ANDREA'}) - [r*] -> (d:Device)
        WHERE d.id IN (
          SELECT DISTINCT device_id FROM public.measuremets WHERE controlled_property = 'soilMoisture'
        )
        RETURN f, r, d
      $$) as (f agtype, r agtype, d agtype);
  - id: "Q5"
    query: |
      SELECT * FROM cypher('agri_graph', $$
        MATCH (f:AgriFarm {name: 'ZESPRI AZ. AGR. DALLE FABBRICHE ANDREA'}) - [r:hasAgriParcel] -> (p:AgriParcel)
        WHERE p.colture IS NOT NULL AND p.colture::text ILIKE '%Kiwi%'
        RETURN f, r, p
      $$) as (f agtype, r agtype, p agtype);
  - id: "Q6"
    query: |
      SELECT * FROM cypher('agri_graph', $$
        MATCH (p:AgriParcel) - [r:hasDevice] -> (d:Device)
        WHERE p.name IS NOT NULL AND p.name::text ILIKE '%T1%' AND d.type = 'DripIrrigation'
        RETURN p, r, d
      $$) as (p agtype, r agtype, d agtype);
  - id: "Q7"
    query: |
      WITH min_moisture AS (
        SELECT
          device_id
        FROM
          public.measuremets
        WHERE
          controlled_property = 'soilMoisture'
        ORDER BY
          value ASC, timestamp DESC
        LIMIT 1
      )
      SELECT * FROM cypher('agri_graph', $$
        MATCH (d:Device)
        WHERE d.id = (SELECT device_id FROM min_moisture)
        RETURN d
      $$) as (d agtype);
  - id: "Q8"
    query: |
      WITH closest_device AS (
        SELECT
          device_id
        FROM
          public.measuremets
        WHERE
          location IS NOT NULL
        ORDER BY
          location::point <-> point(11.799, 44.235)
        LIMIT 1
      )
      SELECT * FROM cypher('agri_graph', $$
        MATCH (d:Device)
        WHERE d.id = (SELECT device_id FROM closest_device)
        RETURN d
      $$) as (d agtype);
  - id: "Q9"
    query: |
      SELECT * FROM cypher('agri_graph', $$
        MATCH (p:AgriParcel) - [r:hasDevice] -> (d:Device)
        WITH p, collect(r) AS rels, collect(d) AS devices, count(d) AS device_count
        ORDER BY device_count DESC
        LIMIT 1
        UNWIND rels AS r_unwind
        UNWIND devices AS d_unwind
        RETURN p, r_unwind, d_unwind
      $$) AS (p agtype, r_unwind agtype, d_unwind agtype);
  - id: "Q10"
    query: |
      WITH min_temp AS (
        SELECT
          device_id
        FROM
          public.measuremets
        WHERE
          controlled_property = 'temperature' -- Assuming 'temperature' is the controlled property
        ORDER BY
          value ASC, timestamp DESC
        LIMIT 1
      )
      SELECT * FROM cypher('agri_graph', $$
        MATCH (d:Device)
        WHERE d.id = (SELECT device_id FROM min_temp)
        RETURN d
      $$) as (d agtype);